<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <style>
    table {
      font-family: Consolas;
      line-height: 0;
      table-layout: fixed;
      width: 620px;
      height: 620px;
    }
    td {
      width: 50px;
      height: 50px;
    }
    button {
      width: 200px;
      height: 200px;
      background: cadetblue;
      border: 5px solid rgba(236, 233, 233, 0.54);
      border-radius: 500px;
    }
    button[disabled] {
      font-size: 120px;
      color: black;
    }

  </style>

</head>
<body>
<br><br><br><br><br>
<div align="center">
<table>
  <tr>
    <td>
      <button id="0" value="empty"></button>
    </td>
    <td>
      <button id="1" value="empty"></button>
    </td>
    <td>
      <button id="2" value="empty"></button>
    </td>
  </tr>
  <tr>
    <td>
      <button id="3" value="empty"></button>
    </td>
    <td>
      <button id="4" value="empty"></button>
    </td>
    <td>
      <button id="5" value="empty"></button>
    </td>
  </tr>
  <tr>
    <td>
      <button id="6" value="empty"></button>
    </td>
    <td>
      <button id="7" value="empty"></button>
    </td>
    <td>
      <button id="8" value="empty"></button>
    </td>

  </tr>
</table>
<br>
<input type="button" id="replay" value="Replay" onclick="replay()"
       style="background: #ff4456; border: 1px solid rgba(236, 233, 233, 0.54); position: absolute; border-radius: 100px;
       color: white; height: 100px;width: 100px">
</div>
  <script>

  let turn = true;

  let table = [];

  let choose = true;

  let rePlay = document.getElementById('replay');

  newTable();

  while (choose) {
    let temp = prompt('Chọn người đi trước (X/O):').toLowerCase()
    if (temp == 'x') {
      turn = false;
      choose = false;
    } else if (temp == 'o') {
      turn = true;
      choose = false;
    } else {
      alert('Chỉ được chọn (X/O)');
    }
  }

  document.addEventListener('click', change)

  function change(event) {
    if (event.srcElement.type == 'submit') {
      turn = !turn;
      if (turn) {
        event.srcElement.innerText = 'x';
        table[event.srcElement.id] = 'x';
        console.log(table)

      } else {
        event.srcElement.innerText = 'o';
        table[event.srcElement.id] = 'o';
        console.log(table)
      }
      event.srcElement.disabled = true;
      check();
    }
  }


  function check() {
    let win = false;
    if (table[0] !== 'empty' && table[0] == table[1] && table[1] == table[2]) {
      document.getElementById('0').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('1').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('2').style.boxShadow = 'blue 1px 1px 6px';
      turnOff();
      rePlay.hidden = false;
      win = true;
      console.log('if1', win);
      alert('Thắng rồi chơi lại không bé')
    }
    if (table[3] !== 'empty' && table[3] == table[4] && table[4] == table[5]) {
      document.getElementById('3').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('4').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('5').style.boxShadow = 'blue 1px 1px 6px';
      turnOff();
      rePlay.hidden = false;
      win = true;
      console.log('if2', win);
      alert('Thắng rồi chơi lại không bé')


    }
    if (table[6] !== 'empty' && table[6] == table[7] && table[7] == table[8]) {
      document.getElementById('6').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('7').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('8').style.boxShadow = 'blue 1px 1px 6px';
      turnOff();
      rePlay.hidden = false;
      win = true;
      console.log('if3', win);
      alert('Thắng rồi chơi lại không bé')


    }
    if (table[0] !== 'empty' && table[0] == table[3] && table[3] == table[6]) {
      document.getElementById('0').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('3').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('6').style.boxShadow = 'blue 1px 1px 6px';
      turnOff();
      rePlay.hidden = false;
      win = true;
      console.log('if4', win);
      alert('Thắng rồi chơi lại không bé')


    }
    if (table[1] !== 'empty' && table[1] == table[4] && table[4] == table[7]) {
      document.getElementById('1').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('4').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('7').style.boxShadow = 'blue 1px 1px 6px';
      turnOff();
      rePlay.hidden = false;
      win = true;
      console.log('if5', win);
      alert('Thắng rồi chơi lại không bé')


    }
    if (table[2] !== 'empty' && table[2] == table[5] && table[5] == table[8]) {
      document.getElementById('2').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('5').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('8').style.boxShadow = 'blue 1px 1px 6px';
      turnOff();
      rePlay.hidden = false;
      win = true;
      console.log('if6', win);
      alert('Thắng rồi chơi lại không bé')


    }
    if (table[0] !== 'empty' && table[0] == table[4] && table[4] == table[8]) {
      document.getElementById('0').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('4').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('8').style.boxShadow = 'blue 1px 1px 6px';
      turnOff();
      rePlay.hidden = false;
      win = true;
      console.log('if7', win);
      alert('Thắng rồi chơi lại không bé')


    }
    if (table[2] !== 'empty' && table[2] == table[4] && table[4] == table[6]) {
      document.getElementById('2').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('4').style.boxShadow = 'blue 1px 1px 6px';
      document.getElementById('6').style.boxShadow = 'blue 1px 1px 6px';
      turnOff();
      rePlay.hidden = false;
      win = true;
      console.log('if8', win);
      alert('Thắng rồi chơi lại không bé')

    }
    if (table.indexOf('empty') === -1) {
      console.log(win)
      if(!win){
        rePlay.hidden = false;
        for (let i = 0; i < 9; i++) {
          document.getElementById('' + i).style.boxShadow = 'red 1px 1px 6px';

        }
      }
    }

  }

  function turnOff() {
    for (let i = 0; i < 9; i++) {
      document.getElementById('' + i).disabled = true;
    }
  }

  function newTable() {
    table = [];
    for (let i = 0; i < 9; i++) {
      table.push(document.getElementById('' + i).value);
    }
  }

  function replay() {
    for (let i = 0; i < 9; i++) {
      newTable();
      document.getElementById('' + i).innerText = '';
      document.getElementById('' + i).disabled = false;
      document.getElementById('' + i).style.boxShadow = '';
    }
  }

</script>

</body>
</html>